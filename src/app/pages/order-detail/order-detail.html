<!-- src/app/pages/order-detail/order-detail.html -->
<div class="order-detail-page">
  <a routerLink="/my-orders" class="back-link">← {{ 'orders.detail.back' | t }}</a>

  <h1>{{ 'orders.detail.title' | t }}</h1>

  <p class="info" *ngIf="loading">{{ 'orders.detail.loading' | t }}</p>
  <p class="error" *ngIf="error">{{ error }}</p>

  <ng-container *ngIf="!loading && !error && order">

    <section class="order-header">
      <div>
        <h2>{{ 'orders.card.titlePrefix' | t }} {{ order.reference }}</h2>
        <p class="date">
          {{ 'orders.datePrefix' | t }} {{ order.createdAt | date:'dd/MM/yyyy à HH:mm' }}
        </p>
      </div>

      <div class="order-meta">
        <span class="status-pill" [ngClass]="order.status.toLowerCase()">
          {{ getStatusLabel(order.status) }}
        </span>
        <p class="total">
          {{ 'orders.detail.totalPrefix' | t }} {{ order.totalAmount | currency:'EUR' }}
        </p>
      </div>
    </section>

    <section class="order-items">
      <h3>{{ 'orders.detail.itemsTitle' | t }}</h3>

      <table>
        <thead>
        <tr>
          <th>{{ 'cart.table.product' | t }}</th>
          <th>{{ 'cart.table.unitPrice' | t }}</th>
          <th>{{ 'cart.table.quantity' | t }}</th>
          <th>{{ 'cart.table.lineTotal' | t }}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of order.items">
          <td>{{ item.productName }}</td>
          <td>{{ item.unitPrice | currency:'EUR' }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.unitPrice * item.quantity | currency:'EUR' }}</td>
        </tr>
        </tbody>
      </table>
    </section>

  </ng-container>
</div>
