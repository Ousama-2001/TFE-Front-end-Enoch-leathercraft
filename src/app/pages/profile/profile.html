<div class="profile-page">

  <h1>Mon profil</h1>

  <section class="orders-section">
    <h2>Mes commandes</h2>

    <div *ngIf="loading" class="info">
      Chargement de vos commandes...
    </div>

    <div *ngIf="error" class="error">
      {{ error }}
    </div>

    <ng-container *ngIf="!loading && !error">

      <ng-container *ngIf="orders.length; else noOrders">
        <div *ngFor="let order of orders" class="order-card">

          <div class="order-header">
            <div>
              <h3>{{ order.reference }}</h3>
              <span class="status {{ order.status | lowercase }}">
                {{ order.status }}
              </span>
            </div>
            <div class="order-total">
              {{ order.totalAmount | currency:'EUR' }}
            </div>
          </div>

          <div class="order-meta">
            <p>Passée le {{ order.createdAt | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>

          <table class="order-items">
            <thead>
            <tr>
              <th>Produit</th>
              <th>Prix</th>
              <th>Qté</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of order.items">
              <td>{{ item.productName }}</td>
              <td>{{ item.unitPrice | currency:'EUR' }}</td>
              <td>{{ item.quantity }}</td>
            </tr>
            </tbody>
          </table>

        </div>
      </ng-container>

      <ng-template #noOrders>
        <p class="empty">Vous n'avez pas encore passé de commande.</p>
      </ng-template>

    </ng-container>

  </section>
</div>
