<div class="cart-page">
  <h1>Votre panier</h1>

  <div *ngIf="cart.items.length; else empty">
    <table class="cart-table">
      <thead>
      <tr>
        <th>Produit</th>
        <th>Prix</th>
        <th>Quantité</th>
        <th>Sous-total</th>
        <th></th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let item of cart.items; trackBy: trackByProductId">
        <td>{{ item.name }}</td>
        <td>{{ item.price | currency:'EUR' }}</td>
        <td class="qty-cell">
          <button (click)="decrease(item)">−</button>
          <span>{{ item.quantity }}</span>
          <button (click)="increase(item)">+</button>
        </td>
        <td>{{ item.price * item.quantity | currency:'EUR' }}</td>
        <td>
          <button class="link-btn" (click)="remove(item)">Supprimer</button>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="cart-summary">
      <div>
        Total : <strong>{{ cart.totalAmount | currency:'EUR' }}</strong>
      </div>

      <div class="summary-actions">
        <button class="btn-secondary" (click)="clear()">Vider le panier</button>
        <button class="btn-primary" (click)="checkout()">Passer commande</button>
      </div>
    </div>
  </div>

  <ng-template #empty>
    <p class="empty-msg">Votre panier est vide.</p>
  </ng-template>
</div>
