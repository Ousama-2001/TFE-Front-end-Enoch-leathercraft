<div class="cart-page">
  <h1>Mon panier</h1>

  <ng-container *ngIf="cart.items.length; else empty">
    <table class="cart-table">
      <thead>
      <tr>
        <th>Produit</th>
        <th>Prix unitaire</th>
        <th>Quantité</th>
        <th>Total ligne</th>
        <th></th>
      </tr>
      </thead>

      <tbody>
      <tr
        *ngFor="let item of cart.items; trackBy: trackByProductId"
      >
        <td>{{ item.name }}</td>

        <td>{{ item.unitPrice | currency: 'EUR' }}</td>

        <td>
          <button type="button" (click)="decrease(item)">−</button>
          <span class="qty">{{ item.quantity }}</span>
          <button type="button" (click)="increase(item)">+</button>
        </td>

        <td>{{ item.lineTotal | currency: 'EUR' }}</td>

        <td>
          <button type="button" (click)="remove(item)">
            Supprimer
          </button>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="cart-summary">
      <p>
        Total ({{ cart.totalQuantity }} article(s)) :
        <strong>{{ cart.totalAmount | currency: 'EUR' }}</strong>
      </p>

      <div class="cart-actions">
        <button type="button" (click)="clearCart()">
          Vider le panier
        </button>

        <a routerLink="/products">
          ← Continuer mes achats
        </a>
      </div>
    </div>
  </ng-container>

  <ng-template #empty>
    <p>Votre panier est vide.</p>
    <a routerLink="/products">← Retour à la boutique</a>
  </ng-template>
</div>
