<div class="account">

  <h1>Mon compte</h1>

  <!-- TABS -->
  <div class="tabs">
    <button [class.active]="activeTab === 'profile'" (click)="switchTab('profile')">üë§ Profil</button>
    <button [class.active]="activeTab === 'address'" (click)="switchTab('address')">üìç Adresse</button>
    <button [class.active]="activeTab === 'orders'" (click)="switchTab('orders')">üì¶ Commandes</button>
    <button [class.active]="activeTab === 'security'" (click)="switchTab('security')">üîí S√©curit√©</button>
  </div>

  <!-- ALERTS -->
  <p *ngIf="error" class="alert error">{{ error }}</p>
  <p *ngIf="success" class="alert success">{{ success }}</p>

  <!-- PROFIL -->
  <div *ngIf="activeTab === 'profile'" class="card">

    <h2>Informations personnelles</h2>

    <form (ngSubmit)="saveProfile()">
      <div class="grid">

        <label>
          Pr√©nom :
          <input [(ngModel)]="profile.firstName" name="first" />
        </label>

        <label>
          Nom :
          <input [(ngModel)]="profile.lastName" name="last" />
        </label>

        <label>
          Email :
          <input [value]="profile.email" disabled />
        </label>

        <label>
          T√©l√©phone :
          <input [(ngModel)]="profile.phone" name="phone" />
        </label>

      </div>

      <button class="btn" [disabled]="savingProfile">
        {{ savingProfile ? '...Enregistrement' : 'Mettre √† jour' }}
      </button>
    </form>

  </div>

  <!-- ADRESSE -->
  <div *ngIf="activeTab === 'address'" class="card">

    <h2>Adresse de livraison</h2>

    <form (ngSubmit)="saveProfile()">
      <div class="grid">

        <label>
          Adresse :
          <input [(ngModel)]="profile.addressLine1" name="address" />
        </label>

        <label>
          Code postal :
          <input [(ngModel)]="profile.postalCode" name="postalCode" />
        </label>

        <label>
          Ville :
          <input [(ngModel)]="profile.city" name="city" />
        </label>

        <label>
          Pays :
          <input [(ngModel)]="profile.country" name="country" />
        </label>

      </div>

      <button class="btn" [disabled]="savingProfile">
        {{ savingProfile ? '...Enregistrement' : 'Mettre √† jour' }}
      </button>
    </form>

  </div>

  <!-- COMMANDES -->
  <div *ngIf="activeTab === 'orders'" class="card">
    <h2>Mes commandes</h2>

    <p *ngIf="loadingOrders">Chargement...</p>

    <table *ngIf="!loadingOrders && myOrders.length" class="orders">
      <thead>
      <tr>
        <th>R√©f</th>
        <th>Date</th>
        <th>Total</th>
        <th>Statut</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let o of myOrders">
        <td>{{ o.reference }}</td>
        <td>{{ o.createdAt | date:'dd/MM/yy HH:mm' }}</td>
        <td>{{ o.totalAmount | currency:'EUR' }}</td>
        <td>{{ o.status }}</td>
      </tr>
      </tbody>
    </table>

    <p *ngIf="!loadingOrders && !myOrders.length">Aucune commande.</p>
  </div>


  <!-- S√âCURIT√â -->
  <div *ngIf="activeTab === 'security'" class="card">
    <h2>Changer le mot de passe</h2>

    <form (submit)="submitPasswordChange()">

      <label>
        Ancien mot de passe :
        <input type="password" [(ngModel)]="oldPassword" name="old" />
      </label>

      <label>
        Nouveau mot de passe :
        <input type="password" [(ngModel)]="newPassword" name="new" />
      </label>

      <label>
        Confirmer :
        <input type="password" [(ngModel)]="confirmPassword" name="confirm" />
      </label>

      <button class="btn" [disabled]="changingPassword">
        {{ changingPassword ? '...' : 'Changer le mot de passe' }}
      </button>

    </form>
  </div>

</div>
