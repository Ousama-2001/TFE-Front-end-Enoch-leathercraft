<div class="product-detail-page" *ngIf="product; else loadingOrError">
  <button class="btn-back" type="button" (click)="goBack()">
    ‚Üê Retour aux produits
  </button>

  <div class="product-detail-card">
    <div class="left">
      <div class="image-wrapper">
        <!-- pour l'instant : placeholder -->
        <img
          src="assets/img/products/placeholder-bag.jpg"
          [alt]="product?.name"
        />
      </div>
    </div>

    <div class="right">
      <h1 class="title">{{ product!.name }}</h1>

      <p class="price">
        {{ product!.price | currency:'EUR' }}
      </p>

      <p class="material" *ngIf="product!.material">
        Mat√©riau : <strong>{{ product!.material }}</strong>
      </p>

      <p class="description">
        {{ product!.description || 'Description √† venir.' }}
      </p>

      <div class="actions">
        <!-- üîπ Si le produit n'est pas encore dans le panier -->
        <ng-container *ngIf="quantity === 0; else qtyControls">
          <button class="btn-cart-animated" type="button" (click)="addToCart()">
            <span class="icon">üõí</span>
            <span class="text">Ajouter au panier</span>
            <span class="check">‚úî</span>
          </button>

        </ng-container>

        <!-- üîπ Si le produit est d√©j√† dans le panier -->
        <ng-template #qtyControls>
          <div class="qty-pill">
            <button type="button" (click)="decrease()">‚àí</button>
            <span>{{ quantity }}</span>
            <button type="button" (click)="addToCart()">+</button>
          </div>

          <span class="added-msg" *ngIf="addedMessage">
            {{ addedMessage }}
          </span>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="product-detail-page center">
    <p *ngIf="loading">Chargement du produit...</p>
    <p *ngIf="!loading && error">{{ error }}</p>
  </div>
</ng-template>
