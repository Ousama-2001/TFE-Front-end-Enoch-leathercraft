<div class="product-detail-page" *ngIf="product; else loadingOrError">
  <button class="btn-back" type="button" (click)="goBack()">
    ‚Üê Retour aux produits
  </button>

  <div class="product-detail-card">
    <div class="left">
      <div class="image-wrapper">
        <img
          [src]="product.imageUrls && product.imageUrls.length > 0
                  ? ('http://localhost:8080' + product.imageUrls[0])
                  : 'assets/img/products/placeholder-bag.jpg'"
          [alt]="product.name"
        />
      </div>
    </div>

    <div class="right">
      <h1>{{ product.name }}</h1>

      <p class="price">
        {{ product.price | currency : 'EUR' }}
      </p>

      <div class="meta">
        <p *ngIf="product.material">
          <strong>Mat√©riau :</strong> {{ product.material }}
        </p>
        <p *ngIf="product.description">
          {{ product.description }}
        </p>
        <p class="stock-msg stock-warning" *ngIf="!isOutOfStock">
          Stock disponible : {{ stockAvailable }} pi√®ce(s).
        </p>
        <p class="stock-msg stock-error" *ngIf="isOutOfStock">
          Produit actuellement en rupture de stock.
        </p>
      </div>

      <div class="qty-row">
        <button
          type="button"
          class="round-btn"
          (click)="decrease()"
          [disabled]="quantity === 0"
        >
          ‚àí
        </button>
        <span class="qty-label">{{ quantity }}</span>
        <button
          type="button"
          class="round-btn"
          (click)="increase()"
          [disabled]="!canIncrease"
        >
          +
        </button>
      </div>

      <div class="actions">
        <button
          class="btn-cart-animated"
          type="button"
          (click)="addToCart()"
          [disabled]="isOutOfStock || !canIncrease"
        >
          üõí Ajouter au panier
        </button>

        <span class="added-msg" *ngIf="addedMessage">
          {{ addedMessage }}
        </span>
      </div>

      <p class="stock-msg inline-msg" *ngIf="stockMessage">
        {{ stockMessage }}
      </p>
    </div>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="product-detail-page center">
    <p *ngIf="loading">Chargement du produit...</p>
    <p *ngIf="!loading && error">{{ error }}</p>
  </div>
</ng-template>
